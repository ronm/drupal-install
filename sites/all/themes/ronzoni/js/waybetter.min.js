/**************************/
/*** waybetter ************/
/*** by Ron Marcelle ******/
/*** Licensed under MIT ***/
/**************************/
/* debounce function taken pretty */
/* direcly from underscore.js...thanks. */

(function(e,t){"use strict";var n="waybetter",r={destroy:function(){return this.each(function(){var e=t.inArray(this,t.fn.waybetter.elements);if(e>-1){t.fn.waybetter.elements.splice(e,1);t(this).data(n,{inview:false}).removeAttr("data-"+n).trigger(n+".destroyed")}})},enable:function(){this.waybetter().trigger(n+".enabled")},inview:function(){return u.apply(this)},refresh:function(){this.trigger(n+".refreshed");return a.apply(this)}},i=function(e,t,n){var r;return function(){var i=this,s=arguments,o=function(){r=null;if(!n)e.apply(i,s)},u=n&&!r;clearTimeout(r);r=setTimeout(o,t);if(u)e.apply(i,s)}},s=function(r){t.fn.waybetter.settings=t.extend(t.fn.waybetter.settings,r);if(!t.fn.waybetter.elements){t.fn.waybetter.elements=this.slice(0,this.length);t(e).bind("scroll."+n+" "+"resize."+n,i(function(){a.apply(t(t.fn.waybetter.elements))},t.fn.waybetter.settings.debounce))}else{this.each(function(){if(t.inArray(this,t.fn.waybetter.elements)===-1){t.fn.waybetter.elements.push(this)}})}return a.apply(t.fn.waybetter.elements)},o=function(e,t,n){return t<e&&e<n},u=function(){var e=t.fn.waybetter.settings.direction,n=t.fn.waybetter.settings.threshold,r=t(t.fn.waybetter.settings.viewport),i=this.offset();if(e==="vertical"){var s=i.top,u=this.outerHeight(),a=r.scrollTop(),f=r.outerHeight()}else{var s=i.left,u=this.outerWidth(),a=r.scrollLeft(),f=r.outerWidth()}var l=a-s;return o(l,n-f,u-n)},a=function(){return this.each(function(){var e=t(this),r=t.fn.waybetter.settings,i=u.apply(e),s=e.data(n),o=s&&s.inview,a=i&&!o,f=!i&&o;if(a||f){if(a){e.data(n,{inview:true}).attr("data-"+n,"").trigger(n+".inview")}else if(f){e.data(n,{inview:false}).removeAttr("data-"+n).trigger(n+".outview")}}})};t.fn.waybetter=function(e){if(!e||t.isFunction(e)||t.isPlainObject(e)){return s.apply(this,arguments)}else if(r[e]){return r[e].apply(this,Array.prototype.slice.call(arguments,1))}else{t.error("Method "+e+" does not exist on Waybetter")}};t.fn.waybetter.elements;t.fn.waybetter.settings={debounce:0,direction:"vertical",threshold:0,viewport:e};t(function(){t("[data-"+n+"-watch]").waybetter()})})(window,jQuery)